<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>NFCReader</title>
        <!--link rel="stylesheet" href="style.css"-->
        <!--script src="script.js"></script-->
    </head>
    <body>
        <!-- page content -->
        <h1>NFC Reader</h1>
        <div>
            <p>To read the M24LR04E-R RFID tag.</p>
        </div>
    </body>
    <script>
        if ('NDEFReader' in window) {
            /* Scan and write NFC tags */ 
            const ndef = new NDEFReader();
            ndef.scan().then(() => {
                console.log("Scan started successfully.");
                ndef.onreadingerror = () => {
                    console.log("Cannot read data from the NFC tag. Try another one?");
                };
                ndef.onreading = event => {
                    const message = event.message;
                    console.log("Received message !");
                    for (const record of message.records) {
                        console.log("Record type:  " + record.recordType);
                        console.log("MIME type:    " + record.mediaType);
                        console.log("Record id:    " + record.id);
                        switch (record.recordType) {
                            case "text":
                            // TODO: Read text record with record data, lang, and encoding.
                            break;
                            case "url":
                            // TODO: Read URL record with record data.
                            break;
                            default:
                            // TODO: Handle other records with record data.
                        }
                    }
                };
            }).catch(error => {
                console.log(`Error! Scan failed to start: ${error}.`);
            });
        }
    </script>
</html> 
